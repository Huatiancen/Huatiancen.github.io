<!-- æ–‡ç« ç›®å½• - ä»…åœ¨æ–‡ç« é¡µæ˜¾ç¤º -->
{% if page.toc and page.layout == 'post' %}
<div class="toc-wrapper sidebar-widget">
  <h3 class="widget-title">ğŸ“– ç›®å½•</h3>
  <nav class="toc-nav">
    {% include toc.html html=content h_min=2 h_max=3 skipNoIDs=true class="toc" %}
  </nav>
</div>
{% endif %}

<!-- æ–‡ç« ç›¸å…³ä¿¡æ¯ - ä»…åœ¨æ–‡ç« é¡µæ˜¾ç¤º -->
{% if page.layout == 'post' %}
<!-- æ–‡ç« ç»Ÿè®¡ -->
<div class="post-stats-widget sidebar-widget">
  <h3 class="widget-title">ï¿½ æ–‡ç« ä¿¡æ¯</h3>
  <div class="widget-content">
    <div class="post-meta-grid">
      <div class="meta-item">
        <span class="meta-label">å‘å¸ƒæ—¶é—´</span>
        <span class="meta-value">{{ page.date | date: "%Y-%m-%d" }}</span>
      </div>
      <div class="meta-item">
        <span class="meta-label">å­—æ•°ç»Ÿè®¡</span>
        <span class="meta-value">{{ content | number_of_words }} å­—</span>
      </div>
      <div class="meta-item">
        <span class="meta-label">é¢„è®¡é˜…è¯»</span>
        <span class="meta-value">{{ content | number_of_words | divided_by: 200 }} åˆ†é’Ÿ</span>
      </div>
      {% if page.categories.size > 0 %}
      <div class="meta-item">
        <span class="meta-label">åˆ†ç±»</span>
        <span class="meta-value">
          {% for category in page.categories %}
            <span class="category-tag">{{ category }}</span>
          {% endfor %}
        </span>
      </div>
      {% endif %}
    </div>
  </div>
</div>

<!-- æ–‡ç« æ ‡ç­¾ -->
{% if page.tags.size > 0 %}
<div class="post-tags-widget sidebar-widget">
  <h3 class="widget-title">ğŸ·ï¸ æ ‡ç­¾</h3>
  <div class="widget-content">
    <div class="tag-cloud">
      {% for tag in page.tags %}
        <a href="/tags/#{{ tag | slugify }}" class="tag-item">{{ tag }}</a>
      {% endfor %}
    </div>
  </div>
</div>
{% endif %}

<!-- ç›¸å…³æ–‡ç«  -->
<div class="related-posts-widget sidebar-widget">
  <h3 class="widget-title">ğŸ“ ç›¸å…³æ–‡ç« </h3>
  <div class="widget-content">
    {% assign related_posts = site.related_posts | limit: 5 %}
    {% if related_posts.size == 0 %}
      {% assign related_posts = site.posts | limit: 5 %}
    {% endif %}
    {% for post in related_posts %}
    {% unless post.url == page.url %}
    <article class="widget-post">
      <h4 class="widget-post-title">
        <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
      </h4>
      <time class="widget-post-date">{{ post.date | date: "%Y-%m-%d" }}</time>
    </article>
    {% endunless %}
    {% endfor %}
  </div>
</div>
{% endif %}
