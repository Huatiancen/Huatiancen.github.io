---
layout: post
title: 杂七杂八
date: 2025-01-01 19:20 +0800
last_modified_at: 2025-01-05 09:42 +0800
tags: ['互联网计算']
toc: true
---

[TOC]



## The bandwidth of an ISDN BRI-B Channel

B:64Kbps

D:16kbps

关于ISDN Integrated Services Digital Networks

1. 集成服务数字网络允许通过现有电话线传输数字信号:提供远程站点的连接
2. ISDN具有以下优点：
   1. 可以携带语音，视频和数据
   2. 使用带外D(或Delta)信道比调制解调器(有时<1s)更快的呼叫建立
   3. 使用B(或屏障)通道以64kps提供更快的数据传输

## NAT&&PAT

Network Address Translation 

网络地址转换

IP数据包头中将一个地址交换为另一个地址的过程

NAT类型

1. 静态NAT：固定的内部地址(internal address)到注册地址(registered address)的映射(一开始就写死)
2. 动态NAT：映射以先到先得的方式动态进行(不是写死，配一个地址池,通过更新)
3. **PAT**(过载，Port address translation)：端口地址转换用于允许许多内部用户共享一个"内部全局"地址(基于Socket映射，而不是IP地址，多个内网主机映射到一个公网地址)

NAT地址类型

1. Inside Local address (内部本地地址):内网IP地址
2. Inside Global address (内部全局地址): 注册IP地址, 对外部展示的内部地址
3. Outside Global address (外部全局地址):由主机所有者分配的IP地址。通常是注册地址。(对内网而言的外部，是目的地址)

## ACL

Access Control Lists 

访问控制列表

1. ACL是指令列表，它告诉路由器允许或拒绝什么类型的数据包。
2. 如果要让路由器拒绝某些数据包，则必须配置ACL。否则，只要链路打开，路由器将接受并转发所有数据包
3. 您可以根据以下情况允许或拒绝数据包：
   1. 源地址
   2. 目的地址
   3. 上层的协议，比如TCP或UDP端口

使用ACL的前提下，发送数据包

1. 为了确定是允许还是拒绝数据包，请按顺序对ACL语句进行测试。
   1. 当一个语句"匹配"时，**不再评估任何语句**。(前面的语句先匹配，处理掉)
   2. 允许或拒绝该数据包。
2. ACL末尾有一个隐含的"deny any"语句:如果数据包与ACL中的任何语句都不匹配，则将其丢弃。

通配符掩码 Wildcard Mask:编写通配符掩码以告知路由器地址中要匹配的位以及要忽略的位。

- **0位表示检查该位位置**
- **1表示忽略该位位置**

和传统的子网掩码刚好取反

标准ACL配置位置离目标主机越近越好 因为标准ACL只能基于源地址进行过滤，如果将其放置在错误的位置，可能会阻止不必要的数据流，造成网络通信问题。（端口1~99 1300~1999）

扩展ACL离源越近越好（端口100~199 2000~2）

## socket

ip address+port number

## 静态路由和动态路由优缺点

- **快速收敛**：动态路由协议设计用于快速适应网络变化，例如链路故障，能够比静态路由更快地收敛。静态路由没有收敛机制，因为它们是手动配置的，不能自动响应网络变化。
- **无CPU使用**：静态路由不需要路由器运行路由算法或维护大型路由表，因此相比动态路由协议，减少了CPU的使用。
- **无带宽使用**：静态路由不生成路由更新或广告，不会消耗带宽来传输路由协议流量。
- **安全性**：静态路由可以提供更安全的路由环境，因为它们不与其他路由器动态交换路由信息，减少了路由攻击或配置错误的风险。

## Topology

Bus 总线型拓扑

**~~bus嘛，想上就上~~**

1. 物理角度:每个主机都连接到一条公用线(总线)。
   - 优点：所有主机都可以直接通信。
   - 缺点：电缆断开会使主机彼此断开连接。
   - 也就是说总线是很重要的，总线一旦断开是不能够通信的，也是不可以分成多段总线进行处理(在未处理的总线上会在断开的地方，反射电信号，形成电路震荡)
2. 逻辑角度：每个网络设备都可以看到来自所有其他设备的所有信号，实际上是广播式传播
3. 优点:比较简单，所有的设备都可以监听到总线的信号。
4. 缺点:
   1. 信号冲突，需要进行复杂的介质访问权限控制来保证通信正常
   2. 如果一处断开，则全部无法进行网络传输

 Ring 环形拓扑

**~~ring嘛，就是一个环~~**

1. 物理角度
   - 所有的设备直接首尾相连，组成一个菊花链(daisy-chain)
   - 可以将信息传送给链上的所有的设备，但是一般是固定顺时针或者逆时针进行传输
2. 逻辑角度
   - 为了使信息流动，每个站点必须将信息传递给其相邻的站点。
   - 我们需要对于链路进行访问控制，防止很多设备同时使用环，我们使用token来进行控制访问权力
3. 缺点:环上只要有一个地方断开就会破坏整个环
4. 令牌环拓扑主要用于控制领域，比较适用于实时系统的处理

Dual Ring 双环拓扑

~~**留了个备胎**~~

1. 物理视角：
   - 双环拓扑结构与环拓扑结构相同，只是有第二个冗余环**连接相同**的设备。
2. 逻辑视角：
   - 双环拓扑就像两个独立的环，同一时间只有一个环被应用。
   - 有token令牌才有发送权力发送信息(使用总线)
3. 优点：提供可靠性和灵活性
4. Eg.优先使用外环，如果外环出现物理错误，则切换到内环上使用，并且对外环进行物理修复。
5. 双环拓扑是指一个结点有两个点，同时只能一个环在传输信息，两个环的传输时的方向是不能确定的。

Star 星型拓扑

~~**有一个被大家捧在手心的星星**~~

1. 物理视角：星型拓扑结构有一个中心节点，所有的链路都从它辐射(radiating)出去。
2. 逻辑视角：所有信息的流动将通过一个设备。
3. 优点: 它允许所有其他节点相互通信，方便。出于安全或限制访问的原因，它也可能是可取的
4. 缺点：如果中心节点出现故障，整个网络就会断开连接。根据使用的网络设备类型，冲突可能是一个问题，中心点会有很大的负担，并且容易造成通信阻塞。
5. 扩展星型拓扑:设置次级中心结点:和Internet的层次结点类似

Tree 树形拓扑结构

~~**数据结构**~~

1. 树拓扑使用一个主干节点(Trunk Node)，从该节点分支到其他节点。
   - 二叉树(每个节点分成两个链接)
   - 主干树(主干有分支节点，其上挂有链接)。
2. 物理观点：主干是一条有几层分支的电线。
3. 逻辑观点：信息流是层次性的。
4. 在根一级数据结点可以对数据进行汇总和统计
5. 类似电信网络:中心点不仅仅是转存和发送，还要控制和统计，而星形拓扑是不需要控制统计的。
6. 当前节点不能处理的部分，则交给父结点处理

Complete(Mesh) 渔网型拓扑

~~**满满的安全感**~~

![](https://huatiancen.oss-cn-nanjing.aliyuncs.com/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-01-02%20130224.png)

1. 物理视角:有明显的优点和缺点
2. 逻辑角度:完整或网格拓扑的行为在很大程度上取决于所使用的设备。
3. 优点：最大的连接性和可靠性。
4. 缺点：链接的媒体数量和到链接的连接数量变得非常庞大。
5. 全连接拓扑
   - 缺点:成本高、路径选择多:添加选择最合理的路径的机制
   - 优点:鲁棒性高，抗干扰能力强。
6. 常使用在比较使用重要的情况下:通常Internet就是使用Mesh的拓扑

Cellular 蜂窝型拓扑

~~**甚至没线了**~~

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec01/23.png)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec01/23.png)

1. 物理视角
   - 蜂窝拓扑结构是用于无线技术的拓扑结构
   - 有时接收节点移动(如手机)，有时发送节点移动(如卫星)
2. 逻辑视角:节点之间直接通信(尽管有时非常困难)，或者只与相邻的单元通信，这是**非常低效**的。
3. 每一个结点都是无线的连通方式:远结点需要进行转发
4. 使用场景
   1. 无线电话
   2. 卫星

 ## MAC

![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec03/5.png)

MAC地址6字节

## VLAN

Virtual Local Area Network

虚拟局域网

在第2层和第3层工作

控制网络广播

允许用户由网络管理员分配。

提供更严格的网络安全性。

VLAN可以从逻辑上将用户划分为不同的子网(广播域)

广播帧仅在具有相同VLAN ID的一个或多个交换机的端口之间切换。(VLAN ID属于端口)

可以通过基于以下内容的软件对用户进行逻辑分组：

1. 端口号
2. MAC地址
3. 使用的协议
4. 使用的应用

路由器提供不同VLAN之间的连接

交换机根据帧中的数据做出过滤和转发决策。

使用了两种技术

1. 帧过滤：检查有关每个帧的特定信息(MAC地址或第3层协议类型),特定的VLAN记录或者映射
2. 帧标记：在整个网络骨干网中转发时，在每个帧的标题中放置一个唯一的标识符。

同一VLAN中的两台主机可以跨越多台交换机(因为有帧标记)

必须是第三层及以上的交换机才能用来构建VLAN

## Switch

根据MAC地址建立和维护**交换表**(类似于网桥表)

将帧切换出接口到目标

- 第二层交换机
  1. 大规模集成电路,保证链路效率,低时延,低成本
  2. 有一个MAC地址
- 第三层交换机
  1. 基于硬件的帧转发机制，较高的帧转发性能，低时延
  2. 较高速的计算
  3. 每一个端口的代价低
  4. 流控制
  5. 安全性更高
  6. 对数据流进行路由，生成MAC和IP的映射
  7. MAC地址过来的时候直接根据表从二层进行通过
- 第四层交换机
  1. 数据段在数据报里面，数据报在数据帧里面
  2. 只要交换机可以看到数据帧的数据部分的首部
  3. 可以根据端口主机的应用特点进行一定的流量控制
  4. 和Net OS是不一样的,没有那么智能
  5. 识别到前80个字节的数据报长度，对指定应用进行管理

## ip route

用于配置静态路由

ip route <目标网络> <子网掩码> <下一跳地址 | 出接口> [<距离>] [<永久>]

参数解析

1. **目标网络**：
   - 这是你希望配置静态路由的目标网络地址。例如，`172.16.3.0` 表示目标网络是 `172.16.3.0`。
2. **子网掩码**：
   - 这是目标网络的子网掩码，用于指定网络的大小。例如，`255.255.255.0` 表示子网掩码为 `24` 位。
3. **下一跳地址 | 出接口**：
   - **下一跳地址**：这是数据包应该被转发到的下一个路由器的IP地址。例如，`192.168.2.4` 表示下一跳地址是 `192.168.2.4`。
   - **出接口**：这是数据包应该离开路由器的接口。例如，`GigabitEthernet0/1` 表示数据包应该从这个接口发送出去。
4. **距离（可选）**：
   - 这是静态路由的管理距离（Administrative Distance，AD），它是一个值，用于决定在多条路由存在时的优先级。默认值是 `1`。如果你不指定这个值，路由器会使用默认值。
5. **永久（可选）**：
   - 如果指定了这个选项，路由条目将被永久保留，即使接口变为不可用。

静态路由优先级高于OSPF等...其默认管理距离为1

## WAN

Wide Area Network 

广域网

作用在网络层和数据链路层以及物理层（下三层

## 使用TCP还是UDP

- TCP协议
  - **HTTP/HTTPS**：网页传输协议（端口80/443）
  - **FTP**：文件传输协议（端口21）
  - **SMTP**：简单邮件传输协议（端口25）
  - **POP3**：邮局协议版本3（端口110）
  - **IMAP**：互联网消息访问协议（端口143）
- UDP协议
  - **DNS**：域名系统（端口53）
  - **DHCP**：动态主机配置协议（端口67/68）
  - **TFTP**：简单文件传输协议（端口69）
  - **SNMP**：简单网络管理协议（端口161）
  - **RTP**：实时传输协议（通常用于音视频应用）

## CSMA/CA 避免冲突的载波侦听多路访问

CSMA/CA(Carrier Sense Multiple Access with Collision Avoidance)

- 发送站点在发送数据前，以**控制短帧**刺激接收站点发送应答短帧，使接收站点周围的站点监听到该帧，从而在一定时间内避免数据发送
- 基本过程
  1. A向B发送RTS(Request To Send，请求发送)帧，A周围的站点在一定时间内不发送数据，以保证CTS帧返回给A；
  2. B向A回答CTS(Clear To Send，清除发送)帧，B周围的站点在一定时间内不发送数据，以保证A发送完数据；
  3. A开始发送
  4. 若控制帧RTS或CTS发生冲突，采用二进制指数后退算法等待随机时间，再重新开始。(A和C同时发送RTS)

## CIDR

Classless Inter-Domain Routing

无类域间路由

- **OSI模型第3层（网络层）**：网络层负责数据包的传输与路由选择。CIDR通过消除传统的IP地址分类（A类、B类、C类）并引入灵活的子网划分，提高了IP地址的利用率和路由表管理的效率。
- CIDR的作用
  - **IP地址分配**：CIDR使得IP地址的分配更加灵活，能够根据实际需求分配合适大小的地址块。
  - **路由聚合**：通过CIDR，可以将多个连续的IP地址块聚合成一个路由表条目，减少路由表的大小，提高路由器的性能。

## DNS

Domain Name System

域名系统

解析域名为IP地址

## URL

Uniform Resource Locator

统一资源定位符

1. 统一资源定位符 URL 是对可以从因特网上得到的资源的位置和访问方法的一种简洁的表示。

2. URL 给资源的位置提供一种抽象的识别方法，并用这种方法给资源定位。

3. 只要能够对资源定位，系统就可以对资源进行各种操作，如存取、更新、替换和查找其属性。

4. URL 相当于一个文件名在网络范围的扩展。因此 URL 是与因特网相连的机器上的任何可访问对象的一个指针。

5. ```
   <URL的访问方式>://<主机>:<端口>/<路径>
   ```

   1. 访问方式:协议HTTPS 或者 HTTP
   2. 主机:域名的方式
   3. 端口对应进程
   4. 路径对应具体的文件

## 第一次进入url地址

解析域名

建立TCP连接

发送HTTP请求

服务器处理请求

发送HTTP响应

浏览器接受到并开始解析HTML内容

## 端口号

1. **HTTP（80）**：
   - 用于Web浏览器和Web服务器之间的通信。
2. **HTTPS（443）**：
   - 用于安全的Web浏览器和Web服务器之间的通信，使用SSL/TLS加密。
3. **FTP（21）**：
   - 用于文件传输协议，传统上用于传输文件。
   - FTP服务要有两个端口。21端口负责发起和建立双方的连接，20负责传输数据
4. **SSH（22）**：
   - 用于安全的远程登录和其他安全网络服务。
5. **Telnet（23）**：
   - 用于远程登录，已经逐渐被SSH取代，因为Telnet不提供加密。
6. **SMTP（25）**：
   - 用于电子邮件的发送。
7. **DNS（53）**：
   - 用于域名系统，解析域名到IP地址。
8. **DHCP（67/68）**：
   - 用于动态主机配置协议，分配IP地址和其他网络配置。
9. **POP3（110）**：
   - 用于电子邮件的接收，通常客户端从服务器下载电子邮件。
10. **IMAP（143）**：
    - 用于电子邮件的接收，允许客户端在服务器上管理和同步邮件。
11. **SNMP（161/162）**：
    - 用于简单网络管理协议，管理和监控网络设备。
12. **LDAP（389）**：
    - 用于轻量目录访问协议，访问和维护分布式目录信息服务。
13. **SMB（445）**：
    - 用于服务器消息块协议，网络文件共享。
14. **MSSQL（1433）**：
    - 用于Microsoft SQL Server数据库服务。
15. **MySQL（3306）**：
    - 用于MySQL数据库服务。
16. **RDP（3389）**：
    - 用于远程桌面协议，远程访问Windows桌面

## 私有IP地址的范围

根据RFC 1918，以下是私有IP地址的范围：

- A类地址

  ：10.0.0.0 到 10.255.255.255

  - 子网掩码：255.0.0.0

- B类地址

  ：172.16.0.0 到 172.31.255.255

  - 子网掩码：255.240.0.0

- C类地址

  ：192.168.0.0 到 192.168.255.255

  - 子网掩码：255.255.0.0

## IP地址分类

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec04/9.png)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec04/9.png)

1. IP地址主要通过第一个字节进行划分
2. 0–127 Class A address A类地址
3. 128-191 Class B address B类地址
4. 192–223 Class C address C类地址
5. 224–239 Class D – Multicast D类地址：多播：视频点播的原理也是组播(多播)
6. 240–255 Class E - Research E类地址：研究

## 划分子网

![](../../../../图片/Screenshots/屏幕截图 2025-01-03 104650.png)

## 查询域名

先查询主机配置的域名服务器 再查Internet根域名，再查询ip地址对应的域名服务器

## STP中的选举

STP决策顺序(Seqence)

生成树始终使用相同的四步决策序列：

1. 在拓扑里面最低的root BID(网桥标识)
2. 找到 Root bridgh的最低路径成本
3. 每个路径都会选择一个最低BID的sender 这个是针对一个链路的，详见例子
4. 每个路径再指定一个最低的ID端口

Bridge Identification/BID

1. 网桥ID(BID)：8个字节(2 + 6)
   1. 高阶BID子字段(2个字节)：网桥优先级
      1. 216个可能的值：0-65,535(默认值：32,768)
      2. 通常以十进制格式表示
   2. 低阶子字段(6个字节)：分配给交换机的MAC地址，以十六进制格式表示
2. STP成本值：成本越低越好。



选举根交换机

1. 交换机通过查找具有**最低BID**的交换机(通常称为根战争)来选择单个根交换机。
2. 如果所有交换机都使用默认的网桥优先级32768，则最低的MAC地址将作为平局。
3. 配置优先级来调整根桥



选择根端口

1. 每个非根桥必须选择一个根端口。
   1. 桥的根端口是最接近根桥的端口。
   2. 根路径成本是到根网桥的所有链接的累积(cumulative)成本。
2. STP成本随着在端口上接收到BPDU而增加，而不是随着它们从端口发送出去而增加。

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec09/15.png)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec09/15.png)

> B会把上面一个端口做为Root Port，虽然两个可达，但是上面一个更快，C也是同样

选择网段的指定端口

1. 每个网段都有一个指定的端口：充当单个网桥/交换机端口，该端口既向该网段又向根网桥发送流量，也从该网段和根网桥接收流量。
2. 包含给定网段的指定端口的网桥/交换机称为该网段的指定网桥。
3. 所有网桥/交换机将阻止它们上未指定的端口，根网桥上的每个活动端口都将成为指定端口
4. 每个链路只有一个指定端口，一旦选定其他就block了

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec09/16.png)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec09/16.png)

- BC之间的，左边是指定端口(BID小)
- MAC地址唯一的
- Root Port都是上面的

![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec09/12.png)

注意看cost的单位 M = Mbp/s

## Cable

crossover cable 交叉电缆 连接两个相同类型的设备

Straight-through Cable 直通线 连接两个不同设备

## 子接口

在路由器上配置子接口（subinterfaces）是为了在同一个物理接口上支持多个逻辑接口。这通常用于VLAN间路由（Router-on-a-Stick）配置中，即一个物理接口被划分为多个子接口，每个子接口关联一个VLAN，从而实现不同VLAN之间的通信。

## BRI(Basic Rate Interface) and PRI(Primary Rate Interface)

1. ISDN服务有两种：
   1. BRI(基本速率接口, Basic Rate Interface),用户虚拟电路数据传，HDLC,PPP
   2. PRI(主速率接口,Primary Rate Interface)，发送控制信息，LAPD
2. ISDN BRI服务提供两个B通道和一个D通道。
3. ISDN BRI将144kbps(2B + D = 144kps)线路的总带宽传送到三个单独的通道中。
4. BRI B信道服务以64 kbps的速率运行，旨在承载用户数据和语音流量。
5. 第三个通道，D通道，是一个16 kbps信令通道，用于承载指令，这些指令告诉电话网络如何处理每个B通道。
6. BRI和DRI都是基于电话信道的

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/17.jpg)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec10/17.jpg)

- B信道传递HDLC和PPP数据帧
- D信道传递LAPD数据帧

## 多路复用

### TDM

Time Division Multiplexing

一种将多个数据流在同一传输介质上进行传输的技术。它通过将时间分成多个时间片，每个时间片分配给不同的信号，以实现多个信号的复用。TDM广泛应用于电话网络、光纤通信和无线通信等领域。

### STDM

统计时分复用（Statistical Time Division Multiplexing，简称STDM）是一种提高带宽利用率的多路复用技术。与传统的同步时分复用（Synchronous Time Division Multiplexing, 简称TDM）不同，STDM根据每个信号源的实际数据发送需求动态分配时间片，从而更加高效地利用传输通道。

### FDM

Frequency Division Multiplexing

频分复用

将多个信号在同一传输介质上进行传输的技术。它通过将不同的信号分配到不同的频率带宽上，从而在同一介质上同时传输多个信号。FDM广泛应用于无线通信、有线电视和卫星通信等领域。

### WDM

Wavelength Division Multiplexing

波分复用

一种光纤通信技术，它通过在一根光纤上使用不同波长的光携带多个信号，从而实现多路复用。WDM广泛应用于长距离光纤通信、城域网和数据中心互连等领域。

### CDM

Code Division Multiplexing

码分复用

一种通信技术，通过使用伪随机序列（伪噪声码）将多路信号在同一频带内进行复用。CDMA广泛应用于无线通信系统，如移动通信网络（如3G）和卫星通信。

路由协议（Routed Protocol）是用于在网络中传输数据的协议，它定义了数据包的格式和传输方式。以下是一些常见的路由协议：

## Routed Protocol && Routing Protocol

Routed Protocol

1. **IP（Internet Protocol）**：
   - **版本**：IPv4 和 IPv6
   - **用途**：在互联网和大多数局域网（LAN）中传输数据。IP协议定义了数据包的格式和地址结构。
2. **IPX（Internetwork Packet Exchange）**：
   - **用途**：主要用于Novell NetWare网络操作系统。虽然现在已经不常见，但在20世纪80年代和90年代初期被广泛使用。
3. **Appletalk**：
   - **用途**：苹果公司开发的一种网络协议，用于早期苹果计算机网络。它定义了数据包格式和传输路径。
4. **DECnet**：
   - **用途**：数字设备公司（Digital Equipment Corporation）开发的网络协议，用于连接其计算机系统。
5. **SNA（Systems Network Architecture）**：
   - **用途**：IBM开发的网络协议，用于其大型计算机系统。
6. **CLNS（Connectionless Network Service）**：
   - **用途**：一种无连接的网络服务协议，主要用于ISO/OSI网络体系结构。

- **路由协议（Routing Protocol）**：负责在网络中发现和维护到不同网络目的地的最佳路径。常见的路由协议包括：
  - **RIP（Routing Information Protocol）**
  - **OSPF（Open Shortest Path First）**
  - **BGP（Border Gateway Protocol）**
  - **EIGRP（Enhanced Interior Gateway Routing Protocol）**
- **路由协议（Routed Protocol）**：定义数据包的格式和传输方式，并在网络中进行实际的数据传输。IP就是最常见的路由协议。

路由协议（Routed Protocol）用于在网络中传输数据，定义了数据包的格式和传输方式。它们与路由协议（Routing Protocol）协同工作，后者负责发现和维护最佳路径。了解这些协议的区别和作用，有助于更好地设计和管理网络。

## Ethernet

以太网（Ethernet）的核心协议主要包括以下几种：

### 1. **Ethernet II (DIX)**

- **简介**：Ethernet II，也称为DIX Ethernet，是由数字设备公司、英特尔和施乐公司共同开发的。它是最常见的以太网帧格式。
- **特点**：使用16位的类型字段来标识上层协议（如IPv4、IPv6、ARP等）。
- **应用**：广泛用于现代以太网网络。

### 2. **IEEE 802.3**

- **简介**：IEEE 802.3 是由电气电子工程师学会（IEEE）定义的标准，它规范了以太网的物理层和数据链路层。
- **特点**：定义了以太网帧格式、介质访问控制（MAC）和物理层规范。

### 3. **MAC (Media Access Control)**

- **简介**：MAC协议是数据链路层的一部分，负责控制如何在共享介质上传输数据。
- **特点**：使用CSMA/CD（载波监听多路访问/冲突检测）机制来避免数据包碰撞，虽然在现代全双工以太网中已经不常用了。
- **应用**：管理帧的发送和接收，控制访问以太网介质。

### 4. **Ethernet Frame Structure**

- **简介**：以太网帧是传输数据的基本单位，具有特定的结构。

- 结构

  - **前导码（Preamble）**：用于同步接收器时钟。
  - **帧开始定界符（SFD）**：标识帧的开始。
  - **目的MAC地址**：目标设备的MAC地址。
  - **源MAC地址**：发送设备的MAC地址。
  - **类型字段/长度字段**：标识上层协议或帧长度。
  - **数据字段**：实际传输的数据。
  - **填充字段**：确保帧至少具有64字节的长度（如果需要）。
  - **帧校验序列（FCS）**：用于错误检测。

```
| Preamble | SFD | Destination MAC | Source MAC | Type/Length | Data | Pad | FCS |
```



### 5. **ARP (Address Resolution Protocol)**

- **简介**：ARP用于解析IP地址到MAC地址，实现网络层和数据链路层之间的地址转换。
- **应用**：在局域网中，ARP使网络中的设备能够找到彼此的硬件地址。

### 6. **RARP (Reverse Address Resolution Protocol)**

- **简介**：RARP用于从MAC地址解析IP地址，通常用于无盘工作站在启动时获取IP地址。
- **应用**：虽然现在已被DHCP取代，但在早期网络中发挥了重要作用。

### 7. **Ethernet Physical Layer Standards**

- **简介**：定义了以太网在不同物理介质上的传输标准，包括双绞线、光纤和同轴电缆等。

- 示例标准

  ：

  - **10BASE-T**：10 Mbps，使用双绞线电缆。
  - **100BASE-TX**：100 Mbps，使用双绞线电缆。
  - **1000BASE-T**：1 Gbps，使用双绞线电缆。
  - **10GBASE-T**：10 Gbps，使用双绞线电缆。

## 224.0.0.5

OSPF使用两个主要的多播地址：

1. **224.0.0.5**：AllSPFRouters（所有OSPF路由器）
2. **224.0.0.6**：AllDRouters（所有指定路由器和备份指定路由器

## 冲突域数目

取决于端口数（Hub除外）

## 端口有无MAC地址

交换机端口无，router有

## Router 内部构造

### 随机存取存储器(RAM, Random Access Memory)

1. 路由器配置文件的临时存储，一般做为内存使用
2. 断电或重新启动时RAM内容丢失
3. 存储:
   1. 路由表
   2. ARP缓存
   3. 快速切换缓存
   4. 报文缓存:可能前面有正在处理的，需要等待
   5. 数据包保留队列
4. 根据地址位就可以读到地址内容(访问比较快)

### 非易失随机存取存储器(NVRAM, Non-volatile RAM)

1. 存储备份(backup)/启动(startup)配置文件
2. 路由器掉电或重启时内容不会丢失。
3. 内置电池的方式来保证不断电，这一部分可以整体单独拿出来
4. 保证快速访问，但是存储空间有限。

### Flash (相当于台式机硬盘)

1. 电子可擦可编程只读存储器(EEPROM, Electronically Erasable Programmable Read-Only Memory)
2. 存储了Cisco IOS(互联网操作系统)
3. 允许更新软件而无需更换闪存芯片
4. 可以存储多个版本的IOS
5. 断电保持

## TCP/IP和OSI模型的异同点

TCP/IP 模型 和 OSI 模型的相似点

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec01/16.png)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec01/16.png)

1. 两者都有层次，网络专业人员需要知道两者，都通过分层的方案来完成具体的实现
2. 两者都有应用层，尽管它们包含非常不同的服务
3. 两者都有相同的传输层和网络层
4. 假设采用分组交换(非电路交换)技术
5. OSI是基于报文交换来进行实现的，TCP/IP也是基于报文交换来完成实现的。

TCP/IP 模型 和 OSI 模型的不同点

[![img](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec01/16.png)](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec01/16.png)

1. TCP/IP看起来更简单，因为它有更少的层
2. **TCP/IP协议是Internet发展的标准，因此TCP/IP模型正是因为它的协议才获得了可信性。**
3. 通常网络不是建立在OSI协议之上的，即使OSI模型被用作指南。
4. **TCP/IP标准是大家都在使用的标准的。(实施标准)**，5层和7层都只是讲课使用的

## 单工、半双工、双工

单向通道Simplex Transmission（单工通信）：只能有一个方向的通信而没有反方向的交互。

双向交替通信Half-Duplex Transmission（半双工通信）：通信的双方都可以发送消息，但不能双方同时发送。

双向同时通信Full-Duplex Transmission（全双工通信）：通信的双方可以同时发送和接收信息。

## 交换方式

 储存转发(Store-and-Forward，网桥、路由器等通过软件的设备)

1. 交换机**接收整个帧**，最后将其计算为CRC，然后再将其发送到目的地
2. 接收后，校验，正确再发送

 Cut-through 直通

1. 转发会增加延迟:通过使用直通切换方法可以减少它
2. 快速转发切换:仅在立即转发帧之前检查目标MAC(只看到帧的目的地址就转发，而不看帧的后面的部分)

 Segment-free Switching 无碎片转发

1. 碎片释放:在转发帧之前读取前64个字节以减少错误:避免碰撞和帧碎片

## IEEE

802.3 通常指[以太网](http://baike.baidu.com/view/848.htm)

802.4委员会已经定义了[令牌总线](http://baike.baidu.com/view/1319235.htm)标准是宽带[网络标准](http://baike.baidu.com/view/13954.htm)

802.5 通常指[令牌环网](http://baike.baidu.com/view/115033.htm)

802.11协议组是国际电工电子工程学会（IEEE）为无线局域网络制定的标准

在802.3协议中，是由一种称为[CSMA/CD](http://baike.baidu.com/view/54303.htm)(Carrier Sense Multiple Access with Collision Detection)的协议来完成调节

802.11协议中由CSMA/CA来完成调节

## Encoding

### 数字通信技术:编码方式的分类

1. 单极性编码:一个正极或者负极
2. 极化编码
   + NRZ(Non-Return to Zero，不归零制码)
   + RZ(Return to Zero，归零制码)
   + 双相位编码
     + 曼彻斯特码
     + 差分曼彻斯特码
3. 双极性编码
   + 传号交替反转码(AMI)
   + 双极性8连0替换码(B8ZS)
   + 3阶高密度双极性码(HDB3)

#### 单极性编码

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec02/29.png)

1. 原理：用0电平表示"0"，正电平表示"1"
2. 缺点：
   + 难以分辨一位的结束和另一位的开始
   + 发送方和接收方必须有时钟同步
   + 若信号中"0"或"1"连续出现，信号直流分量将累加，单极性编码的直流分量问题严重
   + 不好知道时钟同步，连续多个0的问题，会有电流大量累积。
3. 结论：容易产生传播错误

#### 极化编码：不归零制码(NRZ: Non-Return to Zero)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec02/18.png)

1. 不归零电平编码，原理：用负电平表示"0"，正电平表示"1" (或相反)，一定的中和。
2. 缺点：
   + 难以分辨一位的结束和另一位的开始
   + 发送方和接收方必须有时钟同步
   + 尽管不会如单极性编码严重，但若信号中"0" 或"1"连续出现，信号直流分量仍将累加
3. 不归零反相编码
   + 原理：信号电平的一次**翻转**代表比特1，无电平变化代表0
   + 不归零反相编码优于不归零电平编码：由于每次遇到"1"(或"0")都要发生跃迁，因此 可以根据电平跃迁进行有限的同步
   + 不太容易产生电荷的基类，同步还是存在问题的。

#### 极化编码：归零制码(RZ: Return to Zero) 

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec02/19.png)

1. 原理：用负电平表示"0"，正电平表示"1"(或 相反)，比特中位跳变到零电平，从而提供同步

2. 优点：信号本身带有同步信息，经济性好，且不易出错

3. 缺点：需要采用3个不同电平，两次信号变化来编码1比特，因此增加了占用的带宽

   **这个本质就是在一个时钟周期的中点,它得从正/负点位回到零电平**

#### 极化编码：曼彻斯特码(Manchester)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec02/20.png)

1. 原理：**每一位中间都有一个跳变，从低跳到高表示"0"，从高跳到低表示"1"**
   + 请思考："00" "01"曼彻斯特编码下应怎样表示？
   + 优点：克服了NRZ码的不足。每位中间的跳变既可作为数据，又可作为时钟，能够自同步；同时只采用两 个电平，跳变减少，比RZ码效率更高
2. 对于归零编码的改进，使用了两个电位表示2个信息
3. 编码效率为50%，有一半是没有使用的。

#### 极化编码：差分曼彻斯特码(Differential Manchester)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec02/21.png)

1.  原理：
    + **每一位中间跳变：表示时钟**
    + 每一位**位前**跳变：表示数据：有跳变表示"0"，无跳变表示"1" 注意每个周期开始的时候的是否跳变决定了这个周期是0/1
2.  优点：时钟、数据分离，便于提取

#### 双极性编码：双极性传号交替反转码(AMI)

![](https://spricoder.oss-cn-shanghai.aliyuncs.com/2020-Internet-computing/img/lec02/22.png)

1. 与RZ相同的是: 采用三个电平：正、负与零
2. **与RZ不同的是: 零电平表示"0"，正负电平的跃迁表示 "1"，实现对"1"电平的交替反转。**
3. 优点：
   1. 对每次出现的"1"交替反转，使直流分量为0
   2. 尽管连续"0"不能同步，但连续"1"可以同步
4. 这次是1是高点位，下一次就是低电位

## RIP路由表

为了更新路由器B的路由表，我们需要使用RIP协议（Routing Information Protocol）。RIP是一种距离向量路由协议，基于跳数来选择路径。路由器会根据从邻居接收到的新路由信息来更新其路由表。

原始路由表

Code

```
目的网络    距离矢量    下一跳路由
N1          10         A
N2          4          A
N6          8          F
N8          5          E
N9          3          F
```

从路由器C接收到的路由信息

Code

```
目的网络    距离矢量
N2          4
N3          3
N6          6
N8          6
N9          2
```

更新后的路由表

我们需要将从路由器C接收到的路由信息与现有的路由表进行比较，并更新路由表。根据RIP协议，每个接收到的距离向量需要加1，因为它表示从接收到的路由器到目的网络的跳数。

更新步骤：

1. **N2**: 从路由器C接收到的距离是4，加上1变为5。原始路由表中到N2的距离是4（通过A），所以不更新。
2. **N3**: 从路由器C接收到的距离是3，加上1变为4。原始路由表中没有N3，所以添加新条目。
3. **N6**: 从路由器C接收到的距离是6，加上1变为7。原始路由表中到N6的距离是8（通过F），所以更新为更短的距离7（通过C）。
4. **N8**: 从路由器C接收到的距离是6，加上1变为7。原始路由表中到N8的距离是5（通过E），所以不更新。
5. **N9**: 从路由器C接收到的距离是2，加上1变为3。原始路由表中到N9的距离是3（通过F），所以不更新。

更新后的路由表

Code

```
目的网络    距离矢量    下一跳路由
N1          10         A
N2          4          A
N3          4          C
N6          7          C
N8          5          E
N9          3          F
```

总结

更新后的路由表中，路由器B增加了到N3的路由，并更新了到N6的路由以反映新的更短路径。其他条目保持不变，因为它们的现有路径已经是最优路径。

注意，跳数相等的时候维持现有的

## VLAN中ping的路径

![](https://huatiancen.oss-cn-nanjing.aliyuncs.com/img/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202025-01-02%20173404.png)